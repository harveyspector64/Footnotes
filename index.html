<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Footnotes of Creation • Archive</title>

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<script defer src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.38/bundled/lenis.min.js"></script>

<style>
/* ROOT ------------------------------------------------------------------*/
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0c0c0d; --panel:#111; --card:#18181a; --stroke:#2a2a2d;
  --txt:#e4e4e4; --muted:#8a8a8a; --accent:#53ff00;
  --ease:cubic-bezier(.25,.1,.25,1);font-family:"Inter",sans-serif;
}
html,body{height:100%;background:var(--bg);color:var(--txt);scroll-behavior:smooth}
body.no-scroll{overflow:hidden}
.fade-in{opacity:0;transform:translateY(20px);transition:all .7s var(--ease)}
.fade-in.show{opacity:1;transform:none}

/* HEADER ----------------------------------------------------------------*/
header{
  position:fixed;top:0;left:0;width:100%;z-index:1000;
  background:#000b;backdrop-filter:blur(6px);
  display:flex;align-items:center;justify-content:space-between;
  padding:.6rem 1rem;border-bottom:1px solid var(--stroke);
  transition:transform .4s var(--ease)}
header.hide{transform:translateY(-100%)}
header h1{font-size:.8rem;letter-spacing:2px;color:var(--accent);white-space:nowrap}
nav#filters{display:flex;gap:1rem;font-size:.78rem;position:relative}
nav#filters button{
  background:none;border:none;color:var(--txt);
  font-weight:600;cursor:pointer;letter-spacing:1px}
nav#filters button.active{color:var(--accent)}
nav#filters::after{
  content:"";position:absolute;height:2px;background:var(--accent);bottom:-5px;
  left:0;width:var(--uw,0);transform:translateX(var(--ux,0));transition:.3s var(--ease)}
.search{width:16px;height:16px;border:1px solid var(--accent)}

/* GRID ------------------------------------------------------------------*/
main{padding:5rem 2vw 3rem}
.container{max-width:1440px;margin:0 auto}
.grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:1rem}
.card{
  background:var(--card);border:1px solid var(--stroke);cursor:pointer;
  transition:transform .3s var(--ease),box-shadow .3s var(--ease)}
.card:hover{transform:translateY(-3px);box-shadow:0 5px 12px #0007}
.card img{width:100%;aspect-ratio:4/3;object-fit:cover;display:block}
.meta{padding:.8rem .9rem;font-size:.78rem;line-height:1.45}
.meta h3{font-size:1rem;font-weight:600;margin:.2rem 0}
.tag{font-size:.65rem;color:var(--muted);text-transform:uppercase}

/* PANEL -----------------------------------------------------------------*/
#panel{
  position:fixed;top:0;right:-100%;height:100%;width:34%;min-width:310px;
  background:var(--panel);box-shadow:-6px 0 20px #000a;
  overflow-y:auto;transition:right .6s var(--ease);z-index:1100;
  display:flex;flex-direction:column}
#panel.open{right:0}
#panel header{display:flex;justify-content:space-between;align-items:center;
  padding:1rem 1.2rem;border-bottom:1px solid var(--stroke)}
#panel header h2{font-size:1rem;color:var(--accent)}
.close-btn{background:none;border:none;font-size:1.4rem;color:var(--txt);cursor:pointer}
.body{padding:1.2rem 1.4rem;font-size:.9rem;line-height:1.6}
.body img{width:100%;margin:.8rem 0;border:1px solid var(--stroke)}
.body iframe{width:100%;aspect-ratio:16/9;border:none;margin:.8rem 0;border:1px solid var(--stroke)}
.footnotes{margin-top:1rem;border-top:1px dashed var(--stroke);padding-top:.7rem;font-size:.8rem;color:var(--muted)}
@media(max-width:680px){#panel{width:100%}}

/* DIM LAYER WHEN PANEL OPEN ---------------------------------------------*/
#dim{
  position:fixed;inset:0;background:#000a;backdrop-filter:blur(2px);
  opacity:0;visibility:hidden;transition:.4s var(--ease);z-index:1050}
#dim.show{opacity:1;visibility:visible}

/* SCROLLBAR --------------------------------------------------------------*/
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-thumb{background:var(--stroke)}
</style>
</head>
<body>

<div id="dim"></div>

<header id="topbar">
  <h1>FOC • ARCHIVE</h1>
  <nav id="filters" aria-label="Filter">
    <button data-filter="all"   class="active">all</button>
    <button data-filter="vision">vision</button>
    <button data-filter="text"  >text</button>
    <button data-filter="promo" >promo</button>
  </nav>
  <div class="search" aria-hidden="true"></div>
</header>

<main>
  <div class="container">
   <section class="grid" id="grid">

    <article class="card fade-in" data-tags="vision promo">
      <img loading="lazy" src="https://placehold.co/640x480/ff2e2e/000?text=Genesis+Poster" alt="">
      <div class="meta"><span class="tag">vision</span><h3>Genesis Key-Art</h3><span class="date">Day 0</span></div>
    </article>

    <article class="card fade-in" data-tags="text">
      <img loading="lazy" src="https://placehold.co/640x480/1e90ff/000?text=Chapter+Scrap" alt="">
      <div class="meta"><span class="tag">text</span><h3>Clamor in the Void</h3><span class="date">Fragment 134</span></div>
    </article>

    <article class="card fade-in" data-tags="promo">
      <img loading="lazy" src="https://placehold.co/640x480/00af64/000?text=30s+Trailer" alt="">
      <div class="meta"><span class="tag">promo</span><h3>Teaser Clip</h3><span class="date">Now</span></div>
    </article>

   </section>
  </div>
</main>

<aside id="panel" aria-hidden="true">
  <header><h2 id="panelTitle">Title</h2><button class="close-btn" aria-label="Close">&times;</button></header>
  <div class="body" id="panelBody"></div>
</aside>

<script>
/* LENIS smooth scroll ---------------------------------------------------*/
const lenis=new Lenis({smoothWheel:true});
function raf(t){lenis.raf(t);requestAnimationFrame(raf)}requestAnimationFrame(raf);

/* HEADER auto-hide on scroll -------------------------------------------*/
let last=0,topbar=document.getElementById('topbar');
lenis.on('scroll',({animatedScroll})=>{
  if(animatedScroll>last+10)topbar.classList.add('hide');
  else if(animatedScroll<last-10)topbar.classList.remove('hide');
  last=animatedScroll;
});

/* fade-in IntersectionObserver -----------------------------------------*/
const revealObs=new IntersectionObserver((e,obs)=>{
  e.forEach(ent=>{if(ent.isIntersecting){ent.target.classList.add('show');obs.unobserve(ent.target)}})
},{threshold:.15});
document.querySelectorAll('.fade-in').forEach(el=>revealObs.observe(el));

/* FILTER ---------------------------------------------------------------*/
const btns=[...document.querySelectorAll('#filters button')];
const cards=[...document.querySelectorAll('.card')];
function underline(btn){
  const nav=btn.parentElement,r=btn.getBoundingClientRect(),p=nav.getBoundingClientRect();
  nav.style.setProperty('--uw',`${r.width}px`);
  nav.style.setProperty('--ux',`${r.left-p.left}px`);
}
btns.forEach(b=>b.onclick=()=>{
  btns.forEach(x=>x.classList.remove('active'));b.classList.add('active');underline(b);
  const f=b.dataset.filter;
  cards.forEach(c=>c.style.display=(f==='all'||c.dataset.tags.includes(f))?'block':'none');
});
underline(document.querySelector('#filters .active'));

/* PANEL ----------------------------------------------------------------*/
const panel=document.getElementById('panel'), dim=document.getElementById('dim');
const pTitle=document.getElementById('panelTitle'), pBody=document.getElementById('panelBody');
function openPanel(title,html){
  pTitle.textContent=title; pBody.innerHTML=html;
  panel.classList.add('open');panel.setAttribute('aria-hidden','false');
  dim.classList.add('show');document.body.classList.add('no-scroll');
}
function closePanel(){
  panel.classList.remove('open');panel.setAttribute('aria-hidden','true');
  dim.classList.remove('show');document.body.classList.remove('no-scroll');
}
document.querySelector('.close-btn').onclick=closePanel;
dim.onclick=closePanel; document.onkeydown=e=>{if(e.key==='Escape')closePanel()};

/* CARD click (demo content) --------------------------------------------*/
document.querySelectorAll('.card').forEach(c=>{
  c.onclick=()=>{
    const tag=c.dataset.tags.split(' ')[0]; let html='';
    if(tag==='vision'){
      html=`<p>High-res poster foreshadowing cosmic turmoil.</p>
            <img src="https://placehold.co/900x600/ff2e2e/000?text=Full+Poster" alt="">
            <div class="footnotes">Footnote 42 — litho-printed on photon-paper.</div>`;
    }else if(tag==='text'){
      html=`<p><strong>Excerpt — Clamor in the Void</strong></p>
            <p>“In the Before, which is to say the Never-Quite-But-Almost, there roll’d…”</p>`;
    }else{
      html=`<iframe src="https://www.youtube.com/embed/TlP5WIxVirU" title="teaser"></iframe>
            <p>Placeholder clip. Swap embed URL.</p>`;
    }
    openPanel(c.querySelector('h3').textContent,html);
  };
});
</script>
</body>
</html>
